<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SAL: checkidl.tcl Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SAL
   </div>
   <div id="projectbrief">LSST Service Abstraction Layer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('checkidl_8tcl_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">checkidl.tcl</div>  </div>
</div><!--header-->
<div class="contents">
<a href="checkidl_8tcl.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">proc</span> noncoding { r } {</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">global</span> NEWCONSTS KEYINDEX<span class="comment"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> r [<span class="keyword">string</span> trim $r &quot;\{&quot;]<span class="comment"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span>  <span class="keyword">if</span> { [string range $r 0 5] == &quot;#index&quot;} {</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;     <span class="keyword">set</span> KEYINDEX [<span class="keyword">lindex</span> $r 1]<span class="comment"></span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span>     <span class="keyword">return</span> 1<span class="comment"></span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span>  }<span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span>  <span class="keyword">if</span> { [string trim $r] == &quot;&quot; || [<span class="keyword">string</span> range $r 0 0] == &quot;#&quot; || [<span class="keyword">string</span> range $r 0 1] == &quot;//&quot;} {</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;     <span class="keyword">return</span> 1<span class="comment"></span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span>  }<span class="comment"></span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span>  <span class="keyword">if</span> { [string range $r 0 4] == &quot;const&quot;} {</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;     <span class="keyword">set</span> var [<span class="keyword">lindex</span> [<span class="keyword">split</span> [<span class="keyword">lrange</span> $r 1 end] =] 0]<span class="comment"></span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> val [<span class="keyword">lindex</span> [<span class="keyword">split</span> [<span class="keyword">lrange</span> $r 1 end] =] 1]<span class="comment"></span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> NEWCONSTS([<span class="keyword">string</span> trim $var]) $val<span class="comment"></span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span>     <span class="keyword">return</span> 1<span class="comment"></span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span>  }<span class="comment"></span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span>  <span class="keyword">return</span> 0<span class="comment"></span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">proc</span> validitem { type item {op all} } {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">global</span> NEWCONSTS IDLSIZES IDLRESERVED<span class="comment"></span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span>  <span class="keyword">if</span> { $type == &quot;int&quot;} {<span class="keyword">set</span> type &quot;long&quot;}<span class="comment"></span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"></span>  <span class="keyword">if</span> { $type == &quot;byte&quot;} {<span class="keyword">set</span> type &quot;octet&quot;}<span class="comment"></span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span>  <span class="keyword">if</span> { [string range $type 0 5] == &quot;string&quot;} { </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;      <span class="keyword">set</span> id [<span class="keyword">string</span> trim $item &quot;\;&quot;]<span class="comment"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> siz  [<span class="keyword">lindex</span> [<span class="keyword">split</span> $type &quot;&lt;&gt;&quot;] 1]<span class="comment"></span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"></span>      <span class="keyword">if</span> { [info exists NEWCONSTS($siz)]} {<span class="keyword">set</span> siz $NEWCONSTS($siz)}<span class="comment"></span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> nof $siz<span class="comment"></span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> t $type<span class="comment"></span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> v &quot;  string&lt;$siz&gt;    $id&quot;<span class="comment"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"></span>   } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;     <span class="keyword">set</span> it [<span class="keyword">split</span> $item &quot;\[\]&quot;]<span class="comment"></span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> t $type<span class="comment"></span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"></span>     <span class="keyword">if</span> { [llength $it] == 1} {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="keyword">set</span> id [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $it 0] &quot;\;&quot;]<span class="comment"></span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> siz 1<span class="comment"></span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> v &quot;  $t  $id&quot;<span class="comment"></span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"></span>     } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="keyword">set</span> id [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $it 0] &quot;\;&quot;]<span class="comment"></span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> siz  [<span class="keyword">lindex</span> $it 1]<span class="comment"></span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span>      <span class="keyword">if</span> { [info exists NEWCONSTS($siz)]} {<span class="keyword">set</span> siz $NEWCONSTS($siz)}<span class="comment"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> v &quot;  $type   $id\[$siz\]&quot;<span class="comment"></span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"></span>     }<span class="comment"></span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span>   }<span class="comment"></span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span><span class="comment">#puts stdout &quot;valid is $v&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"></span><span class="comment">   </span><span class="keyword">if</span> { [lsearch $IDLRESERVED [string tolower $id]] &gt; -1} {<a class="code" href="utilities_8tcl.html#a58d2aa8875d6c1a926058e1db43f92bd" title="errorexit">errorexit</a> &quot;Invalid use of IDL reserved token $id&quot;}<span class="comment"></span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"></span>   <span class="keyword">if</span> { $op == &quot;dim&quot;} {<span class="keyword">return</span> $siz}<span class="comment"></span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"></span>   <span class="keyword">if</span> { $op == &quot;type&quot;} {<span class="keyword">return</span> $t}<span class="comment"></span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span>   <span class="keyword">if</span> { $op == &quot;id&quot;} {<span class="keyword">return</span> $id}<span class="comment"></span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span>   <span class="keyword">return</span> $v<span class="comment"></span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">proc</span> htmheader { fhtm hid } {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">global</span> NEWCONSTS DEC SDESC<span class="comment"></span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> id [<span class="keyword">join</span> [<span class="keyword">split</span> $hid .] _]<span class="comment"></span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span>              <span class="keyword">puts</span> $fhtm &quot;&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;Stream definition editor - $hid&lt;/TITLE&gt;&lt;/HEAD&gt;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;&lt;BODY BGCOLOR=White&gt;&lt;H1&gt;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;&lt;IMG SRC=\&quot;../LSST_logo.gif\&quot; ALIGN=CENTER&gt;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;&lt;IMG SRC=\&quot;../dde.gif\&quot; ALIGN=CENTER&gt;&lt;P&gt;&lt;HR&gt;&lt;P&gt;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;&lt;H1&gt;Stream $hid&lt;/H1&gt;&lt;P&gt;&quot;<span class="comment"></span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"></span>              <span class="keyword">if</span> { [info exists SDESC($hid)]} {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                 <span class="keyword">puts</span> $fhtm &quot;&lt;H2&gt;Description&lt;/H2&gt;&lt;P&gt;$SDESC($hid)&quot;<span class="comment"></span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span>              } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                 <span class="keyword">if</span> { [info exists DESC($hid)]} {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                    <span class="keyword">puts</span> $fhtm &quot;&lt;H2&gt;Description&lt;/H2&gt;&lt;P&gt;$DESC($hid)&quot;<span class="comment"></span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span>                 } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                    <span class="keyword">puts</span> $fhtm &quot;&lt;H2&gt;Description&lt;/H2&gt;&lt;P&gt;TBD&quot;<span class="comment"></span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span>                 }<span class="comment"></span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span>              }<span class="comment"></span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span>              <span class="keyword">if</span> { [info exists NEWCONSTS(FREQUENCY)]} {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                 <span class="keyword">puts</span> $fhtm &quot;&lt;H2&gt;Update frequency&lt;/H2&gt;&quot;<span class="comment"></span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span>                 <span class="keyword">set</span> FREQUENCY($hid) $NEWCONSTS(FREQUENCY)<span class="comment"></span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span>                 <span class="keyword">if</span> { $NEWCONSTS(FREQUENCY) &lt; 1.0} {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                    <span class="keyword">puts</span> $fhtm &quot;This telemetry stream publishes a new record every [<span class="keyword">expr</span> int(1.0/$NEWCONSTS(FREQUENCY))] seconds&quot;<span class="comment"></span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span>                 } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                    <span class="keyword">puts</span> $fhtm &quot;This telemetry stream publishes a new record at [<span class="keyword">expr</span> int($NEWCONSTS(FREQUENCY))] Hz&quot;<span class="comment"></span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span>                 }<span class="comment"></span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"></span>              }<span class="comment"></span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span>              <span class="keyword">if</span> { [info exists NEWCONSTS(PUBLISHERS)]} {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                 <span class="keyword">set</span> PUBLISHERS($hid) $NEWCONSTS(PUBLISHERS)<span class="comment"></span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"></span>                 <span class="keyword">puts</span> $fhtm &quot;&lt;H2&gt;Publishers&lt;/H2&gt;&quot;<span class="comment"></span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span>                 <span class="keyword">if</span> { $NEWCONSTS(PUBLISHERS) &gt; 1} {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                    <span class="keyword">puts</span> $fhtm &quot;There are $NEWCONSTS(PUBLISHERS) instances of this stream published.&quot;<span class="comment"></span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span>                 } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                    <span class="keyword">puts</span> $fhtm &quot;Only one instance of this stream is published.&quot;<span class="comment"></span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span>                 }<span class="comment"></span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span>              }<span class="comment"></span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span>              <span class="keyword">puts</span> $fhtm &quot;&lt;P&gt;&lt;HR&gt;&lt;H2&gt;Topic Definition&lt;/H2&gt;&lt;P&gt;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;&lt;FORM action=\&quot;/cgi-bin/streamdef\&quot; method=\&quot;post\&quot;&gt;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;&lt;INPUT NAME=\&quot;streamid\&quot; TYPE=\&quot;HIDDEN\&quot; VALUE=\&quot;$id\&quot;&gt;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;&lt;TABLE BORDER=3 CELLPADDING=5 BGCOLOR=LightBlue  WIDTH=600&gt;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;&lt;TR BGCOLOR=Yellow&gt;&lt;B&gt;&lt;TD&gt;Name&lt;/TD&gt;&lt;TD&gt;Type&lt;/TD&gt;&lt;TD&gt;Size&lt;/TD&gt;&lt;TD&gt;Units&lt;/TD&gt;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;&lt;TD&gt;Range&lt;/TD&gt;&lt;TD&gt;Comment&lt;/TD&gt;&lt;TD&gt;Delete&lt;/TD&gt;&lt;/B&gt;&lt;/TR&gt;&quot;<span class="comment"></span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">proc</span> salsyntaxcheck { type value } {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">switch</span> $type {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;         topic { </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                 set vfd [<span class="keyword">join</span> [<span class="keyword">split</span> $value &quot;\&quot;\&#39;\;,\]\[\}\{()@\\&amp;\%\!\` ^=-+&lt;&gt;\/\n&quot;] _]</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                 return &quot;OK $vfd&quot;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;               }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">proc</span> streamsizes { } {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">global</span> NEWSIZES FREQUENCY PUBLISHERS<span class="comment"></span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> stotal 0<span class="comment"> ;</span> <span class="keyword">set</span> dtotal 0<span class="comment"> ;</span> <span class="keyword">set</span> btotal 0<span class="comment"></span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"></span>  <span class="keyword">foreach</span> s [lsort [array names NEWSIZES]] {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;     <span class="keyword">set</span> payload $NEWSIZES($s)<span class="comment"></span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> total   [<span class="keyword">expr</span> ($payload + 48) * $PUBLISHERS($s)]<span class="comment"></span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"></span>     <span class="keyword">if</span> { [info exists FREQUENCY($s)] == 0} {<span class="keyword">set</span> FREQUENCY($s) 0.1}<span class="comment"></span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> persec [<span class="keyword">expr</span> int($total  * $FREQUENCY($s))]<span class="comment"></span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> perday [<span class="keyword">expr</span> $persec * 3600. * 24. /1024./1024.]<span class="comment"></span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span>     <span class="keyword">puts</span> stdout &quot;[<span class="keyword">format</span> %-20s $s]    size=[<span class="keyword">format</span> %6d $total]    rate=[<span class="keyword">format</span> %6d $persec] Bytes/sec [<span class="keyword">format</span> %5.1f $perday] Mb/day&quot;<span class="comment"> </span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> btotal [<span class="keyword">expr</span> $btotal + $total]<span class="comment"></span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> stotal [<span class="keyword">expr</span> $stotal + $persec]<span class="comment"></span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span>     <span class="keyword">set</span> dtotal [<span class="keyword">expr</span> $dtotal + $perday]<span class="comment"></span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span>  }<span class="comment"></span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span>  <span class="keyword">puts</span> stdout &quot;\n[<span class="keyword">format</span> %-20s Total]  size=[<span class="keyword">format</span> %6d $btotal]   rate=[<span class="keyword">format</span> %6d [<span class="keyword">expr</span> int($stotal)]] Bytes/sec [<span class="keyword">expr</span> int($dtotal)] Mb/day&quot;<span class="comment"> </span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keyword">proc</span> getfrequency { hid } {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keyword">global</span> FREQUENCY<span class="comment"></span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span>   <span class="keyword">set</span> subsys [<span class="keyword">lindex</span> [<span class="keyword">split</span> $hid &quot;._&quot;] 0]<span class="comment"></span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"></span>   <span class="keyword">if</span> { [info exists FREQUENCY($subsys)]}  { <span class="keyword">return</span> $FREQUENCY($subsys)}<span class="comment"></span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span>   <span class="keyword">return</span> 0.054<span class="comment"></span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword">proc</span> checkidl { f } {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="keyword">global</span> NEWTOPICS NEWSIZES NEWCONSTS<span class="comment"></span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span><span class="keyword">global</span> DESC SDESC IDLTYPES IDLSIZES<span class="comment"></span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span><span class="keyword">global</span> PUBLISHERS FREQUENCY KEYINDEX<span class="comment"></span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span><span class="keyword">global</span> SAL_DIR TIDUSED SAL_WORK_DIR<span class="comment"></span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span><span class="keyword">global</span> XMLTOPICS XMLTLM<span class="comment"></span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> fin [open $f r]<span class="comment"></span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> fout [open $SAL_WORK_DIR/idl-templates/validated/$f w]<span class="comment"></span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"></span>  <a class="code" href="utilities_8tcl.html#a850b69001387a9e61675e69f2f70be27" title="stdlog">stdlog</a> &quot;Creating $SAL_WORK_DIR/idl-templates/validated/$f&quot;<span class="comment"></span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> id [<span class="keyword">file</span> rootname $f]<span class="comment"></span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> hid [<span class="keyword">join</span> [<span class="keyword">split</span> $id _] .]<span class="comment"></span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> NONCODING 0<span class="comment"></span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> KEYINDEX &quot;&quot;<span class="comment"></span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span>  <span class="keyword">catch</span> {unset XMLTOPICS}<span class="comment"></span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span>  <span class="keyword">catch</span> {unset XMLTLM}<span class="comment"></span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> finds 0<span class="comment"></span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> iinum 0<span class="comment"></span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span>  <span class="keyword">set</span> eid 0<span class="comment"></span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span>  <span class="keyword">while</span> { [gets $fin rec] &gt; -1} {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;     <span class="keyword">puts</span> stdout &quot;---&gt;  $rec&quot;<span class="comment"></span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"></span>     <span class="keyword">if</span> { [noncoding $rec]} {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keyword">incr</span> NONCODING 1<span class="comment"></span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span><span class="comment">#puts stdout &quot;is noncoding&quot;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span><span class="comment">     </span>} <span class="keyword">else</span> {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;       <span class="keyword">if</span> { [string trim $rec] == &quot;\}&quot; ||  [<span class="keyword">string</span> trim $rec] == &quot;\};&quot;} {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;           <span class="keyword">puts</span> stdout &quot;end of topic&quot;<span class="comment"></span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"></span>           <span class="keyword">puts</span> $fout &quot;\};&quot;<span class="comment"></span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span>           <span class="keyword">puts</span> $fout &quot;#pragma keylist $topicid&quot;<span class="comment"></span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span>           <span class="keyword">close</span> $fout<span class="comment"></span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span>           <span class="keyword">close</span> $fdet<span class="comment"></span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span>           <span class="keyword">close</span> $fcmt<span class="comment"></span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> mdid [<span class="keyword">lindex</span> [<span class="keyword">exec</span> md5sum $SAL_WORK_DIR/idl-templates/validated/$topicid.idl] 0]<span class="comment"></span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> tid [<span class="keyword">format</span> %d 0x[<span class="keyword">string</span> range $mdid 26 end]]<span class="comment"></span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> fdef [open $SAL_DIR/code/include/sal/svcSAL_[<span class="keyword">set</span> topicid]_iid.h w]<span class="comment"></span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"></span>           <a class="code" href="checkidl_8tcl.html#a77720f24aadc8bc9eab81fa5648814e9" title="gentopicdefsql">gentopicdefsql</a> $topicid<span class="comment"></span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> fsql [open $SAL_DIR/code/sql/[<span class="keyword">set</span> topicid]_items.sql a]<span class="comment"></span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span>           <span class="keyword">puts</span> $fdef &quot;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;#if !defined(SAL_[<span class="keyword">set</span> topicid]_IID__INCLUDED_)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;#define SAL_[<span class="keyword">set</span> topicid]_IID__INCLUDED_&quot;<span class="comment"></span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span>           <span class="keyword">foreach</span> t $tnames {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;              <span class="keyword">set</span> ps $props($t,size)<span class="comment"></span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"></span>              <span class="keyword">if</span> { $ps &gt; 1 &amp;&amp; $props($t,type) != &quot;string&quot;} {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                 <span class="keyword">incr</span> ps 1<span class="comment"></span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span>              }<span class="comment"></span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"></span>              <span class="keyword">puts</span> $fdef &quot;#define SAL_IID_[<span class="keyword">set</span> topicid]_[<span class="keyword">set</span> t] $tid       // $t $props($t,type) $ps&quot;<span class="comment"></span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span>              <span class="keyword">puts</span> $fsql &quot;INSERT INTO [<span class="keyword">set</span> topicid]_items VALUES ($props($t,num),\&quot;$t\&quot;,\&quot;$props($t,type)\&quot;,$props($t,size),\&quot;$props($t,units)\&quot;,$props($t,freq),\&quot;$props($t,range)\&quot;,\&quot;$props($t,location)\&quot;,\&quot;$props($t,comment)\&quot;);&quot;<span class="comment"></span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span>              <span class="keyword">incr</span> tid 1<span class="comment"></span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span>           }<span class="comment"></span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"></span>           <span class="keyword">puts</span> $fdef &quot;#endif\n&quot;<span class="comment"></span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span>           <span class="keyword">close</span> $fdef<span class="comment"></span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"></span>           <span class="keyword">close</span> $fsql<span class="comment"></span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"></span>           <span class="keyword">puts</span> $fhtm &quot;&lt;/TABLE&gt;&lt;P&gt;Click here to update: &lt;input type=\&quot;submit\&quot; value=\&quot;Submit\&quot; name=\&quot;update\&quot;&gt;&lt;/FORM&gt;&lt;P&gt;&lt;/BODY&gt;&lt;/HTML&gt;&quot;<span class="comment"></span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span>           <span class="keyword">close</span> $fhtm<span class="comment"></span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span>      } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keyword">if</span> { [string range $rec 0 6] == &quot;typedef&quot;} {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;           <span class="keyword">return</span> &quot;ERROR : $rec\nOnly primitive types supported&quot;<span class="comment"></span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span>        }<span class="comment"></span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span>        <span class="keyword">if</span> { [string range $rec 0 5] == &quot;module&quot;} {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;           <span class="keyword">return</span> &quot;ERROR : $rec\nNot supported&quot;<span class="comment"></span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span>        }<span class="comment"></span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span>        <span class="keyword">if</span> { [string range $rec 0 5] == &quot;struct&quot;} {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;           <span class="keyword">incr</span> finds 1<span class="comment"></span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> iinum 0<span class="comment"></span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> sname [<span class="keyword">lindex</span> [<span class="keyword">string</span> trim $rec &quot;\{&quot;] 1]<span class="comment"></span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> status [<a class="code" href="checkidl_8tcl.html#ab119e14f9acd680b5ee26e2acb79961d" title="salsyntaxcheck">salsyntaxcheck</a> topic $sname]<span class="comment"></span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> id [<span class="keyword">file</span> rootname $sname]<span class="comment"></span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> hid [<span class="keyword">join</span> [<span class="keyword">split</span> $id _] .]<span class="comment"></span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> topicid [<span class="keyword">file</span> rootname $sname]<span class="comment"></span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"></span>           <span class="keyword">if</span> { [lindex $status 0] == &quot;OK&quot;} {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;              <span class="keyword">catch</span> {unset tnames}<span class="comment"></span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span>              <span class="keyword">set</span> nt [<span class="keyword">lindex</span> $status 1]<span class="comment"></span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span>              <span class="keyword">if</span> { [info exists NEWTOPICS($nt)]} {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                 <span class="keyword">return</span> &quot;ERROR : $rec\nDuplicate struct definition&quot;<span class="comment"></span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"></span>              }<span class="comment"></span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span>              <span class="keyword">catch</span> {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                 close $fout</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                 incr eid 1</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                 doitem $eid $fhtm &quot;&quot; int 1</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                 puts $fhtm &quot;&lt;/TABLE&gt;&lt;P&gt;Click here to update: &lt;input type=\&quot;submit\&quot; value=\&quot;Submit\&quot; name=\&quot;update\&quot;&gt;&lt;/FORM&gt;&lt;P&gt;&lt;/BODY&gt;&lt;/HTML&gt;&quot;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                 close $fhtm</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                 close $fdet</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                 close $fcmt</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;              }<span class="comment">    </span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span>              <span class="keyword">set</span> fhtm [open $SAL_WORK_DIR/idl-templates/validated/$nt-streamdef.html w]<span class="comment"></span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"></span>              <a class="code" href="checkidl_8tcl.html#a1a840af0c2591f6f0aeabc89991cab61" title="htmheader">htmheader</a> $fhtm $hid<span class="comment"></span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span>              <span class="keyword">set</span> fout [open $SAL_WORK_DIR/idl-templates/validated/$nt.idl w]<span class="comment"></span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"></span>              <span class="keyword">set</span> fdet [open $SAL_WORK_DIR/idl-templates/validated/$nt.detail w]<span class="comment"></span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span>              <span class="keyword">if</span> { $KEYINDEX != &quot;&quot;} {<span class="keyword">puts</span> $fdet &quot;#index $KEYINDEX&quot;<span class="comment">;</span> <span class="keyword">set</span> KEYINDEX &quot;&quot;}<span class="comment"></span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"></span>              <span class="keyword">set</span> fcmt [open $SAL_WORK_DIR/idl-templates/validated/$nt.comments w]<span class="comment"></span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"></span>              <a class="code" href="streamutils_8tcl.html#a05e570af9c48ec2d6da5591ac7ed1448" title="idlpreamble">idlpreamble</a> $fout $nt<span class="comment"></span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span><span class="comment"># use streamutils version</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"></span><span class="comment">#              puts $fout &quot;struct $nt \{</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"></span><span class="comment">#  string&lt;32&gt; private_revCode;  //private</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span><span class="comment">#  double     private_sndStamp; //private</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"></span><span class="comment">#  double     private_rcvStamp; //private</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"></span><span class="comment">#  long       private_seqNum;   //private</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span><span class="comment">#  long       private_origin;   //private</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"></span><span class="comment">#  long       private_host;     //private&quot;</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span><span class="comment">              </span><span class="keyword">set</span> NEWTOPICS($hid) 1<span class="comment"></span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"></span>              <span class="keyword">set</span> NEWSIZES($hid)  0<span class="comment"></span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span>           } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;              <span class="keyword">return</span> &quot;ERROR : $rec\n$status&quot;<span class="comment"></span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span>           }<span class="comment"></span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"></span>        } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;           <span class="keyword">if</span> { $finds == 0} {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;              <span class="keyword">return</span> &quot;ERROR : $rec\nItem precedes struct&quot;<span class="comment"></span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"></span>           }<span class="comment"></span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> u &quot;&quot;<span class="comment"></span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span>           <span class="keyword">if</span> { [string trim [lindex $rec 0]] == &quot;unsigned&quot;} {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;              <span class="keyword">set</span> u &quot; unsigned&quot;<span class="comment"></span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span>              <span class="keyword">set</span> rec [<span class="keyword">string</span> range [<span class="keyword">string</span> trim $rec] 9 end]<span class="comment"></span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"></span>           }<span class="comment"></span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> type [<span class="keyword">string</span> tolower [<span class="keyword">lindex</span> [<span class="keyword">split</span> [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $rec 0]] &quot;&lt;&quot;] 0]]<span class="comment"></span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span>           <span class="keyword">if</span> { [lsearch $IDLTYPES $type] &lt; 0} {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;              <span class="keyword">return</span> &quot;ERROR : $rec\nType $type not supported&quot;<span class="comment"></span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span>           }<span class="comment"></span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> vitem [<a class="code" href="checkidl_8tcl.html#ab5968bd865b22bcda3c5b6d31ad10ddf" title="validitem">validitem</a> [<span class="keyword">lindex</span> $rec 0] [<span class="keyword">lindex</span> $rec 1]]<span class="comment"></span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> siz [<a class="code" href="checkidl_8tcl.html#ab5968bd865b22bcda3c5b6d31ad10ddf" title="validitem">validitem</a> [<span class="keyword">lindex</span> $rec 0] [<span class="keyword">lindex</span> $rec 1] dim ]<span class="comment"></span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> type [<a class="code" href="checkidl_8tcl.html#ab5968bd865b22bcda3c5b6d31ad10ddf" title="validitem">validitem</a> [<span class="keyword">lindex</span> $rec 0] [<span class="keyword">lindex</span> $rec 1] type ]<span class="comment"></span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span>           <span class="keyword">set</span> id [<a class="code" href="checkidl_8tcl.html#ab5968bd865b22bcda3c5b6d31ad10ddf" title="validitem">validitem</a> [<span class="keyword">lindex</span> $rec 0] [<span class="keyword">lindex</span> $rec 1] id ]<span class="comment"></span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"></span>           <span class="keyword">if</span> { [lindex [split $id _] 0] == &quot;private&quot;} {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;              <span class="keyword">puts</span> stdout &quot;Skipping private item $id&quot;<span class="comment"></span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"></span>           } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;             <span class="keyword">set</span> m1 [<span class="keyword">lindex</span> [<span class="keyword">split</span> $rec &quot;/&quot;] 2]<span class="comment"></span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> meta [<span class="keyword">split</span> $m1 &quot;|&quot;]<span class="comment"></span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> freq  [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $meta 0]]<span class="comment"></span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> units [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $meta 1]]<span class="comment"></span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> comments [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $meta 2]]<span class="comment"></span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> range [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $meta 3]]<span class="comment"></span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> location [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $meta 4]]<span class="comment"></span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> pubsize [<span class="keyword">string</span> trim [<span class="keyword">lindex</span> $meta 5]]<span class="comment"></span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"></span><span class="comment">#             puts stdout &quot;$nt - $u $id $type $siz $units $range $comments&quot;</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"></span><span class="comment">             </span><span class="keyword">incr</span> NEWSIZES($hid) $siz<span class="comment"></span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"></span>             <span class="keyword">puts</span> $fout &quot; $u [<span class="keyword">string</span> trim $vitem];&quot;<span class="comment"></span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"></span>             <span class="keyword">incr</span> eid 1<span class="comment"></span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span>             <a class="code" href="streamutils_8tcl.html#afe2136a72aeab325c3d4b8bbb92fbda6" title="doitem">doitem</a> $eid $fhtm $id $type $siz &quot;$units&quot; &quot;$range&quot; &quot;$comments&quot;<span class="comment"> </span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"></span>             <span class="keyword">puts</span> stdout  &quot;doitem $eid $fhtm $id $type $siz |$units |$range  |$comments &quot;<span class="comment"></span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span>             <span class="keyword">if</span> { $freq != &quot;&quot; &amp;&amp; $freq != &quot;tbd&quot;} {<span class="keyword">set</span> FREQUENCY($hid) $freq}<span class="comment"></span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"></span>             <span class="keyword">if</span> { [info exists FREQUENCY($hid)] == 0} {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                 <span class="keyword">set</span> FREQUENCY($hid) [<a class="code" href="checkidl_8tcl.html#a8ab05a2904541d4798d4009e18eda3c5" title="getfrequency">getfrequency</a> $hid]<span class="comment"></span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span>             }<span class="comment"></span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"></span>             <span class="keyword">puts</span> $fdet &quot;$hid.$id $siz $type $FREQUENCY($hid)&quot;<span class="comment"></span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"></span>             <span class="keyword">lappend</span> tnames $id<span class="comment"></span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span>             <span class="keyword">incr</span> iinum 1<span class="comment"></span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> props($id,num) &quot;$iinum&quot;<span class="comment"></span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> props($id,size) $siz<span class="comment"></span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> props($id,type) &quot;$u[<span class="keyword">lindex</span> [<span class="keyword">split</span> $type &quot;&lt;&quot;] 0]&quot;<span class="comment"></span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> props($id,freq) &quot;$FREQUENCY($hid)&quot;<span class="comment"></span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> props($id,range) &quot;$range&quot;<span class="comment"></span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> props($id,units) &quot;$units&quot;<span class="comment"></span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> props($id,location) &quot;$location&quot;<span class="comment"></span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> props($id,comment) &quot;$comments&quot;<span class="comment"></span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> ikey &quot;[<span class="keyword">set</span> nt]_[<span class="keyword">set</span> id]&quot;<span class="comment"></span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTOPICS($ikey) 1<span class="comment"></span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,EFDB_Topic) $nt<span class="comment"></span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,EFDB_Name) $id<span class="comment"></span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Description) $comments<span class="comment"></span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Frequency) $FREQUENCY($hid)<span class="comment"></span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Publishers) 1<span class="comment"></span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span>             <span class="keyword">if</span> { $pubsize != &quot;&quot;} {<span class="keyword">catch</span> {set XMLTLM($ikey,Publishers) [<span class="keyword">expr</span> $pubsize/$siz]}}<span class="comment"></span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Values_per_Publisher) $siz<span class="comment"></span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> bytesiz $IDLSIZES([<span class="keyword">lindex</span> [<span class="keyword">split</span> $type &quot;&lt;&quot;] 0])<span class="comment"></span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Size_in_bytes) [<span class="keyword">expr</span> $siz * $bytesiz]<span class="comment"></span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,IDL_Type) $type<span class="comment"></span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Units) $units<span class="comment"></span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Conversion) $range<span class="comment"></span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Sensor_location) $location<span class="comment"></span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Count) $siz<span class="comment"></span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Instances_per_night) [<span class="keyword">expr</span>  $FREQUENCY($hid)*43200]<span class="comment"></span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Bytes_per_night) [<span class="keyword">expr</span> int($FREQUENCY($hid)*43200*$siz*$bytesiz)]<span class="comment"></span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"></span>             <span class="keyword">set</span> XMLTLM($ikey,Explanation) &quot;http://sal.lsst.org/SAL/Telemetry/$ikey.html&quot;<span class="comment"></span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"></span>             <span class="keyword">if</span> { [string trim $comments] != &quot;none&quot; &amp;&amp; [<span class="keyword">string</span> trim $comments] != &quot;&quot;} {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keyword">puts</span> $fcmt &quot;set COMMENT($hid.$id) \&quot;[<span class="keyword">string</span> trim $comments]\&quot;&quot;<span class="comment"></span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"></span>             }<span class="comment"></span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span>           }<span class="comment"></span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"></span>          }<span class="comment"></span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span>        }<span class="comment"></span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"></span>     }<span class="comment"></span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"></span>  }<span class="comment"></span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"></span>  <span class="keyword">close</span> $fin<span class="comment"></span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"></span>  writeXMLsubsys $SAL_WORK_DIR/xml $nt topic<span class="comment"></span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"></span>  <span class="keyword">if</span> { $finds == 0} {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;     <a class="code" href="utilities_8tcl.html#a58d2aa8875d6c1a926058e1db43f92bd" title="errorexit">errorexit</a> &quot;No struct found in $f&quot;<span class="comment"></span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"></span>  }<span class="comment"></span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"></span>  <span class="keyword">return</span> OK<span class="comment"></span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keyword">proc</span> gentopicdefsql { topic } {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="keyword">global</span> SAL_DIR<span class="comment"></span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"></span>   <span class="keyword">set</span> fsql [open $SAL_DIR/code/sql/[<span class="keyword">set</span> topic]_items.sql w]<span class="comment"></span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span>   <span class="keyword">puts</span> $fsql &quot;DROP TABLE IF EXISTS [<span class="keyword">set</span> topic]_items;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;CREATE TABLE [<span class="keyword">set</span> topic]_items (</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  num  int,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  item char(32),</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  type  char(32),</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  size  int,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  units char(32),</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  freq  float,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  range char(32),</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  location char(32),</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  comment char(128),</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  PRIMARY KEY (num)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;);&quot;<span class="comment"></span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"></span>  <span class="keyword">close</span> $fsql<span class="comment"></span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keyword">proc</span> checkall { } {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keyword">set</span> all [lsort [glob *.idl]]<span class="comment"></span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"></span>  <span class="keyword">foreach</span> i $all { <a class="code" href="checkidl_8tcl.html#a18388dcd25762c64c00609223de56f73" title="checkidl">checkidl</a> $i<span class="comment"> ;</span> <span class="keyword">puts</span> stdout &quot;Validated $i&quot;}<span class="comment"></span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="keyword">proc</span> testdupiid { } {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="keyword">global</span> SAL_DIR<span class="comment"></span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span>   <span class="keyword">set</span> all [lsort [glob $SAL_DIR/code/include/sal/svcSAL_*_iid.h]]<span class="comment"></span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"></span>   <span class="keyword">foreach</span> i $all { </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="utilities_8tcl.html#a850b69001387a9e61675e69f2f70be27" title="stdlog">stdlog</a> &quot;Checking $i&quot;<span class="comment"></span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"></span>      <span class="keyword">set</span> fin [open $i r]<span class="comment"></span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"></span>      <span class="keyword">while</span> { [gets $fin rec] &gt; -1} {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;         <span class="keyword">set</span> n [<span class="keyword">lindex</span> $rec 2]<span class="comment"></span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span>         <span class="keyword">if</span> { [info exists used($)]} {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="utilities_8tcl.html#a850b69001387a9e61675e69f2f70be27" title="stdlog">stdlog</a> &quot;Duplicate IID = $n in $i&quot;<span class="comment"></span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"></span>            <span class="keyword">close</span> $fin<span class="comment"></span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"></span>            <span class="keyword">return</span><span class="comment"></span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"></span>         } <span class="keyword">else</span> {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keyword">set</span> used([<span class="keyword">lindex</span> $rec 2]) 1<span class="comment"></span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"></span>         }<span class="comment"></span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"></span>      <span class="keyword">close</span> $fin<span class="comment"></span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"></span>   }<span class="comment"></span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"></span>}<span class="comment"></span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="keyword">set</span> SAL_WORK_DIR $env(SAL_WORK_DIR)<span class="comment"></span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"></span><span class="keyword">set</span> SAL_DIR $env(SAL_DIR)<span class="comment"></span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"></span>source $env(SAL_DIR)/streamutils.tcl<span class="comment"></span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"></span>source $env(SAL_DIR)/unitsdesc.tcl<span class="comment"></span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span>source $env(SAL_DIR)/datastream_desc.tcl<span class="comment"></span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"></span>source $env(SAL_DIR)/camera-subsysdesc.tcl<span class="comment"></span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"></span>source $env(SAL_DIR)/utilities.tcl<span class="comment"></span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"></span>source $env(SAL_DIR)/xml/SALTopicTemplateXML.tcl<span class="comment"></span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span>source $env(SAL_DIR)/add_system_dictionary.tcl<span class="comment"></span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="keyword">set</span> IDLTYPES &quot;boolean char byte octet short int long longlong float double string unsigned&quot;<span class="comment"></span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(byte)     1<span class="comment"></span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(char)     1<span class="comment"></span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(octet)    1<span class="comment"></span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(boolean)  2<span class="comment"></span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(string)   1<span class="comment"></span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(short)    2<span class="comment"></span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(int)      4<span class="comment"></span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(long)     4<span class="comment"></span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(longlong) 8<span class="comment"></span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(float)    4<span class="comment"></span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLSIZES(double)   8<span class="comment"></span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span><span class="keyword">set</span> IDLRESERVED &quot;abstract any attribute boolean case char component const consumes context custom default double emits enum eventtype exception factory false finder fixed float getraises home import in inout interface local long module multiple native object octet oneway out primarykey private provides public publishes raises readonly sequence setraises short string struct supports switch true truncatable typedef typeid typeprefix union unsigned uses valuebase valuetype void wchar wstring&quot;<span class="comment"></span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="checkidl_8tcl.html">checkidl.tcl</a></li>
    <li class="footer">Generated on Thu Jul 24 2014 16:01:54 for SAL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
