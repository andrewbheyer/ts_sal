<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTI Data Distribution Service C++ API: DDSContentFilter Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>DDSContentFilter Class Reference<br>
<small>
[<a class="el" href="group__DDSTopicEntityModule.html">Topic</a>]</small>
</h1><em><a class="el" href="group__DDSDocGuideModule.html#a_st_interface">&lt;&lt;interface&gt;&gt;</a></em> Interface to be used by a custom filter of a <a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a>  
<a href="#_details">More...</a>
<p>
<a href="classDDSContentFilter-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__DDSReturnTypesModule.html#ga13">DDS_ReturnCode_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDSContentFilter.html#a1">compile</a> (void **new_compile_data, const char *expression, const <a class="el" href="structDDS__StringSeq.html">DDS_StringSeq</a> &amp;parameters, const <a class="el" href="structDDS__TypeCode.html">DDS_TypeCode</a> *type_code, const char *type_class_name, void *old_compile_data)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compile an instance of the content filter according to the filter expression and parameters of the given data type.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__DDSCdrTypesModule.html#ga12">DDS_Boolean</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDSContentFilter.html#a2">evaluate</a> (void *compile_data, const void *sample)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Evaluate whether the sample is passing the filter or not according to the sample content.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDSContentFilter.html#a3">finalize</a> (void *compile_data)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A previously compiled instance of the content filter is no longer in use and resources can now be cleaned up.  <a href="#a3"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<em><a class="el" href="group__DDSDocGuideModule.html#a_st_interface">&lt;&lt;interface&gt;&gt;</a></em> Interface to be used by a custom filter of a <a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a> 
<p>
<dl compact><dt><b>Entity:</b></dt><dd><a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a> </dd></dl>
This is the interface that can be implemented by an application-provided class and then registered with the <a class="el" href="classDDSDomainParticipant.html">DDSDomainParticipant</a> such that samples can be filtered for a <a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a> with the given filter name. <p>
<b>Note:</b> the API for using a custom content filter is subject to change in a future release. <p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a> <p>
<a class="el" href="classDDSDomainParticipant.html#a6">DDSDomainParticipant::register_contentfilter</a> </dd></dl>

<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a1" doxytag="DDSContentFilter::compile"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual <a class="el" href="group__DDSReturnTypesModule.html#ga13">DDS_ReturnCode_t</a> DDSContentFilter::compile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void **&nbsp;</td>
          <td class="mdname" nowrap> <em>new_compile_data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>expression</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="structDDS__StringSeq.html">DDS_StringSeq</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="structDDS__TypeCode.html">DDS_TypeCode</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>type_code</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>type_class_name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>old_compile_data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Compile an instance of the content filter according to the filter expression and parameters of the given data type. 
<p>
This method is called when an instance of the locally registered content filter is created or when the expression parameter for the locally registered content filter instance is changed. <p>
An instance of the locally registered content filter is created every time a local <a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a> with the matching filter name is created, or when a <a class="el" href="classDDSDataReader.html">DDSDataReader</a> with a matching filter name is discovered. <p>
It is possible for multiple threads to be calling into this function at the same time. However, this function will never be called on a content filter that has been unregistered. <p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>new_compile_data</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_out">&lt;&lt;out&gt;&gt;</a></em> User specified opaque pointer of this instance of the content filter. This value is then passed to the <a class="el" href="classDDSContentFilter.html#a2">DDSContentFilter::evaluate</a> and <a class="el" href="classDDSContentFilter.html#a3">DDSContentFilter::finalize</a> functions for this instance of the content filter. Can be set to NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>expression</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_in">&lt;&lt;in&gt;&gt;</a></em> An ASCIIZ string with the filter expression. The memory used by this string is owned by RTI Data Distribution Service and <b>must</b> not be freed. If you want to manipulate this string, you <b>must</b> first make a copy of it. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parameters</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_in">&lt;&lt;in&gt;&gt;</a></em> A string sequence with the expression parameters the <a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a> was created with. The string sequence is <b>equal</b> (but <b>not</b> identical) to the string sequence passed to <a class="el" href="classDDSDomainParticipant.html#a23">DDSDomainParticipant::create_contentfilteredtopic</a>. Note that the sequence passed to the compile function is <b>owned</b> by RTI Data Distribution Service and <b>must</b> <b>not</b> be referenced outside the compile function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type_code</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_in">&lt;&lt;in&gt;&gt;</a></em> A pointer to the type code for the related <a class="el" href="classDDSTopic.html">DDSTopic</a> of the <a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a>. A type_code is a description of a type in terms of which <b>types</b> it contains (such as long, string, etc.) and the corresponding member field names in the data type structure. The type code can be used to write custom content filters that can be used with any type. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type_class_name</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_in">&lt;&lt;in&gt;&gt;</a></em> Fully qualified class name of the related <a class="el" href="classDDSTopic.html">DDSTopic</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>old_compile_data</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_in">&lt;&lt;in&gt;&gt;</a></em> The previous new_compile_data value from a previous call to this instance of a content filter. If the compile function is called more than once for an instance of a <a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a>, e.g., if the expression parameters are changed, then the new_compile_data value returned by the previous invocation is passed in the old_compile_data parameter (which can be NULL). If this is a new instance of the filter, NULL is passed. This parameter is useful for freeing or reusing resources previously allocated for this </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>One of the <a class="el" href="group__DDSReturnTypesModule.html#DDSReturnTypesModule_std_retcodes">Standard Return Codes</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="DDSContentFilter::evaluate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual <a class="el" href="group__DDSCdrTypesModule.html#ga12">DDS_Boolean</a> DDSContentFilter::evaluate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>compile_data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>sample</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Evaluate whether the sample is passing the filter or not according to the sample content. 
<p>
This method is called when a sample for a locally created <a class="el" href="classDDSDataReader.html">DDSDataReader</a> associated with the filter is received, or when a sample for a discovered <a class="el" href="classDDSDataReader.html">DDSDataReader</a> assocated with the filter needs to be sent. <p>
It is possible for multiple threads to be calling into this function at the same time. However, this function will never be called on a content filter that has been unregistered. <p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>compile_data</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_in">&lt;&lt;in&gt;&gt;</a></em> The last return value of the <a class="el" href="classDDSContentFilter.html#a1">DDSContentFilter::compile</a> function for this instance of the content filter. Can be NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sample</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_in">&lt;&lt;in&gt;&gt;</a></em> Pointer to a deserialized sample to be filtered </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The function must return 0 if the sample should be filtered out, non zero otherwise </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="DDSContentFilter::finalize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void DDSContentFilter::finalize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>compile_data</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A previously compiled instance of the content filter is no longer in use and resources can now be cleaned up. 
<p>
This method is called when an instance of the locally registered content filter is deleted. <p>
An instance of the locally registered content filter is deleted every time a local <a class="el" href="classDDSContentFilteredTopic.html">DDSContentFilteredTopic</a> with the matching filter name is deleted, or when a <a class="el" href="classDDSDataReader.html">DDSDataReader</a> with a matching filter name is removed due to discovery. <p>
This method is also called on all instances of the discovered <a class="el" href="classDDSDataReader.html">DDSDataReader</a> with a matching filter name if the filter is unregistered with <a class="el" href="classDDSDomainParticipant.html#a8">DDSDomainParticipant::unregister_contentfilter</a> <p>
It is possible for multiple threads to be calling into this function at the same time. However, this function will never be called on a content filter that has been unregistered. <p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>compile_data</em>&nbsp;</td><td><em><a class="el" href="group__DDSDocGuideModule.html#a_st_in">&lt;&lt;in&gt;&gt;</a></em> The last return value of the <a class="el" href="classDDSContentFilter.html#a1">DDSContentFilter::compile</a> function for this instance of the content filter. Can be NULL. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Data Distribution Service C++ API Version 4.2e (General Access Release)</A>
Copyright &copy; 4 Dec 2007 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
