<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTI Data Distribution Service C API: Publisher Use Cases</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>Publisher Use Cases<br>
<small>
[<a class="el" href="group__DDSHowToModule.html">Programming How-To's</a>]</small>
</h1>Working with publishers.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<h2><a class="anchor" name="DDSPublisherExampleModule_publisher_setup">
Setting up a publisher</a></h2>
<ul>
<li><a class="el" href="group__DDSParticipantExampleModule.html#DDSParticipantExampleModule_setup">Set up participant</a></li></ul>
<p>
<ul>
<li>Create a DDS_Publisher <div class="fragment"><pre class="fragment">    <span class="keyword">struct </span><a class="code" href="structDDS__PublisherQos.html">DDS_PublisherQos</a> publisher_qos = <a class="code" href="group__DDSPublisherModule.html#ga26">DDS_PublisherQos_INITIALIZER</a>;
    <a class="code" href="group__DDSPublisherModule.html#ga0">DDS_Publisher</a>* publisher;
    <span class="keyword">struct </span><a class="code" href="structDDS__PublisherListener.html">DDS_PublisherListener</a> publisher_listener =
        <a class="code" href="group__DDSPublisherModule.html#ga27">DDS_PublisherListener_INITIALIZER</a>;
    <a class="code" href="group__DDSReturnTypesModule.html#ga13">DDS_ReturnCode_t</a> retcode;

    <span class="comment">/* MyPublisherListener_* functions are user defined to match</span>
<span class="comment">       DDS_PublisherListener functions */</span>
    publisher_listener.<a class="code" href="structDDS__PublisherListener.html#o0">as_datawriterlistener</a>.<a class="code" href="structDDS__DataWriterListener.html#o1">on_offered_deadline_missed</a> =
        MyPublisherListener_OfferedDeadlineMissed;
    publisher_listener.<a class="code" href="structDDS__PublisherListener.html#o0">as_datawriterlistener</a>.<a class="code" href="structDDS__DataWriterListener.html#o2">on_offered_incompatible_qos</a> = 
        MyPublisherListener_OfferedIncompatibleQos;
    publisher_listener.<a class="code" href="structDDS__PublisherListener.html#o0">as_datawriterlistener</a>.<a class="code" href="structDDS__DataWriterListener.html#o3">on_liveliness_lost</a> = 
        MyPublisherListener_LivelinessLost;
    publisher_listener.<a class="code" href="structDDS__PublisherListener.html#o0">as_datawriterlistener</a>.<a class="code" href="structDDS__DataWriterListener.html#o4">on_publication_matched</a> = 
        MyPublisherListener_PublicationMatch;

    retcode = <a class="code" href="group__DDSDomainParticipantModule.html#ga11">DDS_DomainParticipant_get_default_publisher_qos</a>(participant, 
                                                    &amp;publisher_qos);

    <span class="keywordflow">if</span> (retcode != <a class="code" href="group__DDSReturnTypesModule.html#gga13a0">DDS_RETCODE_OK</a>) {
        printf(<span class="stringliteral">"***Error: failed to get default publisher qos\n"</span>);
    }

    publisher = <a class="code" href="group__DDSDomainParticipantModule.html#ga21">DDS_DomainParticipant_create_publisher</a>(participant, 
                                                       &amp;publisher_qos, 
                                                       &amp;publisher_listener <span class="comment">/* or NULL */</span>,
                                                       <a class="code" href="group__DDSStatusTypesModule.html#ga2">DDS_STATUS_MASK_ALL</a>);

    <span class="keywordflow">if</span> (publisher == NULL) {
        printf(<span class="stringliteral">"***Error: failed to create publisher\n"</span>);
    }
</pre></div></li></ul>
<h2><a class="anchor" name="DDSPublisherExampleModule_publisher_teardown">
Tearing down a publisher</a></h2>
<ul>
<li>Delete DDS_Publisher: <div class="fragment"><pre class="fragment">    <a class="code" href="group__DDSReturnTypesModule.html#ga13">DDS_ReturnCode_t</a> retcode;

    retcode = <a class="code" href="group__DDSDomainParticipantModule.html#ga22">DDS_DomainParticipant_delete_publisher</a>(participant, publisher);

    <span class="keywordflow">if</span> (retcode != <a class="code" href="group__DDSReturnTypesModule.html#gga13a0">DDS_RETCODE_OK</a>) {
        printf(<span class="stringliteral">"***Error: failed to delete publisher\n"</span>);
    }
</pre></div> </li></ul>
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Data Distribution Service C API Version 4.2e (General Access Release)</A>
Copyright &copy; 4 Dec 2007 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
