<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTI Data Distribution Service C++ API: DDS_RtpsWellKnownPorts_t Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>DDS_RtpsWellKnownPorts_t Struct Reference<br>
<small>
[<a class="el" href="group__DDSWireProtocolQosModule.html">WIRE_PROTOCOL</a>]</small>
</h1>RTPS well-known port mapping configuration.  
<a href="#_details">More...</a>
<p>
<a href="structDDS__RtpsWellKnownPorts__t-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o0">port_base</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The base port offset.  <a href="#o0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o1">domain_id_gain</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tunable domain gain parameter.  <a href="#o1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o2">participant_id_gain</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tunable participant gain parameter.  <a href="#o2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o3">builtin_multicast_port_offset</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Additional offset for <b>metatraffic</b> multicast port.  <a href="#o3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o4">builtin_unicast_port_offset</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Additional offset for <b>metatraffic</b> unicast port.  <a href="#o4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o5">user_multicast_port_offset</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Additional offset for <b>usertraffic</b> multicast port.  <a href="#o5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o6">user_unicast_port_offset</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Additional offset for <b>usertraffic</b> unicast port.  <a href="#o6"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
RTPS well-known port mapping configuration. 
<p>
RTI Data Distribution Service uses the RTPS wire protocol. The discovery protocols defined by RTPS rely on well-known ports to initiate discovery. These well-known ports define the multicast and unicast ports on which a Participant will listen for discovery <b>metatraffic</b> from other Participants. The discovery metatraffic contains all the information required to establish the presence of remote DDS entities in the network. <p>
The well-known ports are defined by RTPS in terms of port mapping expressions with several tunable parameters, which allow the user to customize what network ports are used by the middleware. These parameters are exposed in <a class="el" href="structDDS__RtpsWellKnownPorts__t.html">DDS_RtpsWellKnownPorts_t</a>. In order for all Participants in a system to correctly discover eachother, it is important that they all use the same port mapping expressions. <p>
The actual port mapping expressions, as defined by the RTPS specification, can be found below. In addition to the parameters listed in <a class="el" href="structDDS__RtpsWellKnownPorts__t.html">DDS_RtpsWellKnownPorts_t</a>, the port numbers depend on: <p>
- <code>domain_id</code>, as specified in <a class="el" href="classDDSDomainParticipantFactory.html#a3">DDSDomainParticipantFactory::create_participant</a> <p>
- <code>participant_id</code>, as specified using <a class="el" href="structDDS__WireProtocolQosPolicy.html#o0">DDS_WireProtocolQosPolicy::participant_id</a> <p>
The <code>domain_id</code> parameter ensures no port conflicts exist between Participants belonging to different domains. This also means that discovery metatraffic in one domain is not visible to Participants in a different domain. The <code>participant_id</code> parameter ensures that unique unicast port numbers are assigned to Participants belonging to the same domain on a given host. <p>
The <em>metatraffic_unicast_port</em> is used to exchange discovery metatraffic using unicast. <div class="fragment"><pre class="fragment"> metatraffic_unicast_port = port_base + (domain_id_gain * domain_id) + (participant_id_gain * participant_id) + builtin_unicast_port_offset </pre></div> <p>
The <em>metatraffic_multicast_port</em> is used to exchange discovery metatraffic using multicast. The corresponding multicast group addresses are specified via <a class="el" href="structDDS__DiscoveryQosPolicy.html#o2">DDS_DiscoveryQosPolicy::multicast_receive_addresses</a> on a <a class="el" href="classDDSDomainParticipant.html">DDSDomainParticipant</a> entity. <div class="fragment"><pre class="fragment"> metatraffic_multicast_port = port_base + (domain_id_gain * domain_id) + builtin_multicast_port_offset </pre></div> <p>
RTPS also defines the <em>default</em> multicast and unicast ports on which DataReaders and DataWriters receive <b>usertraffic</b>. These default ports can be overridden using the <a class="el" href="structDDS__DataReaderQos.html#o16">DDS_DataReaderQos::multicast</a>, <a class="el" href="structDDS__DataReaderQos.html#o15">DDS_DataReaderQos::unicast</a>, or by the <a class="el" href="structDDS__DataWriterQos.html#o18">DDS_DataWriterQos::unicast</a> QoS policies. <p>
The <em>usertraffic_unicast_port</em> is used to exchange user data using unicast. <div class="fragment"><pre class="fragment"> usertraffic_unicast_port = port_base + (domain_id_gain * domain_id) + (participant_id_gain * participant_id) + user_unicast_port_offset </pre></div> <p>
The <em>usertraffic_multicast_port</em> is used to exchange user data using multicast. The corresponding multicast group addresses can be configured using <a class="el" href="structDDS__TransportMulticastQosPolicy.html">DDS_TransportMulticastQosPolicy</a>. <div class="fragment"><pre class="fragment"> usertraffic_multicast_port = port_base + (domain_id_gain * domain_id) + user_multicast_port_offset </pre></div> <p>
By default, the port mapping parameters are configured to compliant with OMG's forthcoming DDS Interoperability Wire Protocol (see also <a class="el" href="group__DDSWireProtocolQosModule.html#ga1">DDS_INTEROPERABLE_RTPS_WELL_KNOWN_PORTS</a>). <p>
The OMG's forthcoming DDS Interoperability Wire Protocol compliant port mapping parameters are <em>not</em> backwards compatible with previous versions of the RTI Data Distribution Service middleware. <p>
When modifying the port mapping parameters, care must be taken to avoid port aliasing. This would result in undefined discovery behavior. The chosen parameter values will also determine the maximum possible number of domains in the system and the maximum number of participants per domain. Additionally, any resulting mapped port number must be within the range imposed by the underlying transport. For example, for UDPv4, this range typically equals [1024 - 65535]. <p>
<dl compact><dt><b>QoS:</b></dt><dd><a class="el" href="structDDS__WireProtocolQosPolicy.html">DDS_WireProtocolQosPolicy</a> <br>
 </dd></dl>

<p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="o0" doxytag="DDS_RtpsWellKnownPorts_t::port_base"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a> <a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o0">DDS_RtpsWellKnownPorts_t::port_base</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The base port offset. 
<p>
All mapped well-known ports are offset by this value. <p>
<b>[default]</b> 7400 <p>
<b>[range]</b> [&gt;= 1], but resulting ports must be within the range imposed by the underlying transport.     </td>
  </tr>
</table>
<a class="anchor" name="o1" doxytag="DDS_RtpsWellKnownPorts_t::domain_id_gain"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a> <a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o1">DDS_RtpsWellKnownPorts_t::domain_id_gain</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Tunable domain gain parameter. 
<p>
Multiplier of the <code>domain_id</code>. Together with <code>participant_id_gain</code>, it determines the highest <code>domain_id</code> and <code>participant_id</code> allowed on this network. <p>
In general, there are two ways to setup <code>domain_id_gain</code> and <code>participant_id_gain</code> parameters. <p>
If <code>domain_id_gain</code> &gt; <code>participant_id_gain</code>, it results in a port mapping layout where all <a class="el" href="classDDSDomainParticipant.html">DDSDomainParticipant</a> instances within a single domain occupy a consecutive range of <code>domain_id_gain</code> ports. Precisely, all ports occupied by the domain fall within: <div class="fragment"><pre class="fragment"> (port_base + (domain_id_gain * domain_id)) </pre></div> and: <div class="fragment"><pre class="fragment"> (port_base + (domain_id_gain * (domain_id + 1)) - 1) </pre></div> <p>
Under such a case, the highest <code>domain_id</code> is limited only by the underlying transport's maximum port. The highest <code>participant_id</code>, however, must satisfy: <div class="fragment"><pre class="fragment"> max_participant_id &lt; (domain_id_gain / participant_id_gain) </pre></div> <p>
On the contrary, if <code>domain_id_gain</code> &lt;= <code>participant_id_gain</code>, it results in a port mapping layout where a given domain's <a class="el" href="classDDSDomainParticipant.html">DDSDomainParticipant</a> instances occupy ports spanned across the entire valid port range allowed by the underlying transport. For instance, it results in the following potential mapping: <table border="1" cellspacing="3" cellpadding="3">
<tr>
<td>Mapped Port </td><td>Domain Id </td><td>Participant ID  </td></tr>
<tr>
<td>higher port number </td><td>Domain Id = 1 </td><td>Participant ID = 2  </td></tr>
<tr>
<td></td><td>Domain Id = 0 </td><td>Participant ID = 2  </td></tr>
<tr>
<td></td><td>Domain Id = 1 </td><td>Participant ID = 1  </td></tr>
<tr>
<td></td><td>Domain Id = 0 </td><td>Participant ID = 1  </td></tr>
<tr>
<td></td><td>Domain Id = 1 </td><td>Participant ID = 0  </td></tr>
<tr>
<td>lower port number </td><td>Domain Id = 0 </td><td>Participant ID = 0  </td></tr>
</table>
<p>
Under this case, the highest <code>participant_id</code> is limited only by the underlying transport's maximum port. The highest <code>domain_id</code>, however, must satisfy: <div class="fragment"><pre class="fragment"> max_domain_id &lt; (participant_id_gain / domain_id_gain) </pre></div> <p>
Additionally, <code>domain_id_gain</code> also determines the range of the port-specific offsets. <div class="fragment"><pre class="fragment"> domain_id_gain &gt; abs(builtin_multicast_port_offset - user_multicast_port_offset) </pre></div> <div class="fragment"><pre class="fragment"> domain_id_gain &gt; abs(builtin_unicast_port_offset - user_unicast_port_offset) </pre></div> <p>
Violating this may result in port aliasing and undefined discovery behavior. <p>
<b>[default]</b> 250 <p>
<b>[range]</b> [&gt; 0], but resulting ports must be within the range imposed by the underlying transport.     </td>
  </tr>
</table>
<a class="anchor" name="o2" doxytag="DDS_RtpsWellKnownPorts_t::participant_id_gain"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a> <a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o2">DDS_RtpsWellKnownPorts_t::participant_id_gain</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Tunable participant gain parameter. 
<p>
Multiplier of the <code>participant_id</code>. See <a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o1">DDS_RtpsWellKnownPorts_t::domain_id_gain</a> for its implications on the highest <code>domain_id</code> and <code>participant_id</code> allowed on this network. <p>
Additionally, <code>participant_id_gain</code> also determines the range of <code>builtin_unicast_port_offset</code> and <code>user_unicast_port_offset</code>. <div class="fragment"><pre class="fragment"> participant_id_gain &gt; abs(builtin_unicast_port_offset - user_unicast_port_offset) </pre></div> <p>
<b>[default]</b> 2 <p>
<b>[range]</b> [&gt; 0], but resulting ports must be within the range imposed by the underlying transport.     </td>
  </tr>
</table>
<a class="anchor" name="o3" doxytag="DDS_RtpsWellKnownPorts_t::builtin_multicast_port_offset"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a> <a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o3">DDS_RtpsWellKnownPorts_t::builtin_multicast_port_offset</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Additional offset for <b>metatraffic</b> multicast port. 
<p>
It must be unique from other port-specific offsets. <p>
<b>[default]</b> 0 <p>
<b>[range]</b> [&gt;= 0], but resulting ports must be within the range imposed by the underlying transport.     </td>
  </tr>
</table>
<a class="anchor" name="o4" doxytag="DDS_RtpsWellKnownPorts_t::builtin_unicast_port_offset"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a> <a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o4">DDS_RtpsWellKnownPorts_t::builtin_unicast_port_offset</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Additional offset for <b>metatraffic</b> unicast port. 
<p>
It must be unique from other port-specific offsets. <p>
<b>[default]</b> 10 <p>
<b>[range]</b> [&gt;= 0], but resulting ports must be within the range imposed by the underlying transport.     </td>
  </tr>
</table>
<a class="anchor" name="o5" doxytag="DDS_RtpsWellKnownPorts_t::user_multicast_port_offset"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a> <a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o5">DDS_RtpsWellKnownPorts_t::user_multicast_port_offset</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Additional offset for <b>usertraffic</b> multicast port. 
<p>
It must be unique from other port-specific offsets. <p>
<b>[default]</b> 1 <p>
<b>[range]</b> [&gt;= 0], but resulting ports must be within the range imposed by the underlying transport.     </td>
  </tr>
</table>
<a class="anchor" name="o6" doxytag="DDS_RtpsWellKnownPorts_t::user_unicast_port_offset"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__DDSCdrTypesModule.html#ga5">DDS_Long</a> <a class="el" href="structDDS__RtpsWellKnownPorts__t.html#o6">DDS_RtpsWellKnownPorts_t::user_unicast_port_offset</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Additional offset for <b>usertraffic</b> unicast port. 
<p>
It must be unique from other port-specific offsets. <p>
<b>[default]</b> 11 <p>
<b>[range]</b> [&gt;= 0], but resulting ports must be within the range imposed by the underlying transport.     </td>
  </tr>
</table>
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Data Distribution Service C++ API Version 4.2e (General Access Release)</A>
Copyright &copy; 4 Dec 2007 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
