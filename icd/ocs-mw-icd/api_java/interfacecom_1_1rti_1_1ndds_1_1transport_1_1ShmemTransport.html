<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTI Data Distribution Service Java API: ShmemTransport Interface Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="examples.html">Examples</a></div>
<div class="nav">
<b>com</b>.<b>rti</b>.<b>ndds</b>.<b>transport</b>.<a class="el" href="interfacecom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport.html">ShmemTransport</a></div>
<h1>ShmemTransport Interface Reference<br>
<small>
[<a class="el" href="group__NDDS__TransportBuiltinsComponent.html">Built-in Transport Plugins</a>]</small>
</h1>Builtin <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport.html">Transport</a> Plugin for Inter-Process Communications using Shared Memory (NDDS_TRANSPORT_CLASSID_SHMEM).  
<a href="#_details">More...</a>
<p>
<p>Inheritance diagram for ShmemTransport:
<p><center><img src="interfacecom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport.png" usemap="#ShmemTransport_map" border="0" alt=""></center>
<map name="ShmemTransport_map">
<area href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport.html" alt="Transport" shape="rect" coords="0,0,106,24">
</map>
<a href="interfacecom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport_1_1Property__t.html">Property_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Subclass of <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html">com.rti.ndds.transport.Transport.Property_t</a> allowing specification of parameters that are specific to the shared-memory transport.  <a href="classcom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport_1_1Property__t.html#_details">More...</a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Builtin <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport.html">Transport</a> Plugin for Inter-Process Communications using Shared Memory (NDDS_TRANSPORT_CLASSID_SHMEM). 
<p>
This plugin uses System Shared Memory to send messages between processes on the same node. <p>
The transport plugin has exactly one "receive interface"; since the <code>address_bit_count</code> is 0, it can be assigned any address. Thus the interface is located by the "network address" associated with the transport plugin. <h2><a class="anchor" name="ShmemTransport_compatibility">
Compatibility of Sender and Receiver Transports</a></h2>
Opening a receiver "port" on shared memory corresponds to creating a shared memory segment using a name based on the port number. The transport plugin's properties are embedded in the shared memory segment. <p>
When a sender tries to send to the shared memory port, it verifies that properties of the receiver's shared memory transport are compatible with those specified in its transport plugin. If not, the sender will fail to attach to the port and will output messages such as below (with numbers appropriate to the properties of the transport plugins involved). <div class="fragment"><pre class="fragment">  NDDS_Transport_Shmem_attachShmem:failed to initialize incompatible properties
  NDDS_Transport_Shmem_attachShmem:countMax 0 &gt; -19417345 or max size -19416188 &gt; 2147482624 		  </pre></div> In this scenario, the properties of the sender or receiver transport plugin instances should be adjusted, so that they are compatible. <h2><a class="anchor" name="ShmemTransport_crash">
Crashing and Restarting Programs</a></h2>
If a process using shared memory crashes (say because the user typed in ^C), resources associated with its shared memory ports may not be properly cleaned up. Later, if another RTI Data Distribution Service process needs to open the same ports (say, the crashed program is restarted), it will attempt to reuse the shared memory segment left behind by the crashed process. <p>
The reuse is allowed iff the properties of transport plugin are compatible with those embedded in the shared memory segment (i.e., of the original creator). Otherwise, the process will fail to open the ports, and will output messages such as below (with numbers appropriate to the properties of the transport plugins involved). <div class="fragment"><pre class="fragment">  NDDS_Transport_Shmem_create_recvresource_rrEA:failed to initialize shared 
  	memory resource Cannot recycle existing shmem: size not compatible for key 0x1234 		  </pre></div> In this scenario, the shared memory segments must be cleaned up using appropriate platform specific commands. For details, please refer to the platform notes. <h2><a class="anchor" name="ShmemTransport_keys">
Shared Resource Keys</a></h2>
The transport uses the <b>shared</b> <b>memory</b> <b>segment</b> <b>keys</b>, given by the formula below. <div class="fragment"><pre class="fragment">                  0x400000 + port                 
</pre></div> The transport also uses signaling <b>shared</b> <b>semaphore</b> <b>keys</b> given by the formula below. <div class="fragment"><pre class="fragment">                  0x800000 + port                 
</pre></div> The transport also uses mutex <b>shared</b> <b>semaphore</b> <b>keys</b> given by the formula below. <div class="fragment"><pre class="fragment">                  0xb00000 + port                 
</pre></div> wher the <code>port</code> is a function of the <code>domain_id</code> and the <code>participant_id</code>, as described in <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1WireProtocolQosPolicy.html#o0">com.rti.dds.infrastructure.WireProtocolQosPolicy.participant_id</a> <p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1WireProtocolQosPolicy.html#o0">com.rti.dds.infrastructure.WireProtocolQosPolicy.participant_id</a> <p>
<a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1TransportSupport.html#e1">com.rti.ndds.transport.TransportSupport.set_builtin_transport_property()</a> </dd></dl>
<h2><a class="anchor" name="ShmemTransport_register">
Creating and Registering Shared Memory Transport Plugin</a></h2>
RTI Data Distribution Service can implicitly create this plugin and register with the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a> if this transport is specified in <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1TransportBuiltinQosPolicy.html">com.rti.dds.infrastructure.TransportBuiltinQosPolicy</a>. <p>
To specify the properties of the builtin shared memory transport that is implicitly registered, you can either: <p>
<ul>
<li>call <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1TransportSupport.html#e1">com.rti.ndds.transport.TransportSupport.set_builtin_transport_property</a> or </li>
<li>specify the pre-defined property names in <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1PropertyQosPolicy.html">com.rti.dds.infrastructure.PropertyQosPolicy</a> associated with the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a>. (see <a class="el" href="interfacecom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport.html#TransportSHMEMPropertyNameModule">Shared Memory Transport Property Names in Property QoS Policy of Domain Participant</a>). </li>
</ul>
Builtin transport plugin properties specified in <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1PropertyQosPolicy.html">com.rti.dds.infrastructure.PropertyQosPolicy</a> always overwrite the ones specified through <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1TransportSupport.html#e1">com.rti.ndds.transport.TransportSupport.set_builtin_transport_property()</a>. The default value is assumed on any unspecified property. <p>
Note that all properties should be set before the transport is implicitly created and registered by RTI Data Distribution Service. See <a class="el" href="group__NDDS__TransportBuiltinsComponent.html">Built-in Transport Plugins</a> for details on when a builtin transport is registered. <h2><a class="anchor" name="TransportSHMEMPropertyNameModule">
Shared Memory Transport Property Names in Property QoS Policy of Domain Participant</a></h2>
The following table lists the predefined property names that can be set in the <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1PropertyQosPolicy.html">com.rti.dds.infrastructure.PropertyQosPolicy</a> of a <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a> to configure the builtin shared memory transport plugin. <p>
<center> <table border="1" cellspacing="3" cellpadding="3">
<caption align="bottom"><em>Property Strings for Shared Memory <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport.html">Transport</a></em></caption>
<tr>
<th><b> Name </b>  </th><th><b> Descriptions </b>  <p>
<p>
</th></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.address_bit_count </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o1">com.rti.ndds.transport.Transport.Property_t.address_bit_count</a>  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.properties_bitmap </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o2">com.rti.ndds.transport.Transport.Property_t.properties_bitmap</a>  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.gather_send_buffer_count_max </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o3">com.rti.ndds.transport.Transport.Property_t.gather_send_buffer_count_max</a>  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.message_size_max </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o4">com.rti.ndds.transport.Transport.Property_t.message_size_max</a>  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.allow_interfaces </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o5">com.rti.ndds.transport.Transport.Property_t.allow_interfaces_list</a> and com.rti.ndds.transport.Transport.Property_t.allow_interfaces_list_length. <br>
 Interfaces should be specified as comma-separated strings, with each comma delimiting an interface. For example, "127.0.0.1,eth0"   </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.deny_interfaces </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o6">com.rti.ndds.transport.Transport.Property_t.deny_interfaces_list</a> and com.rti.ndds.transport.Transport.Property_t.deny_interfaces_list_length. <br>
 Interfaces should be specified as comma-separated strings, with each comma delimiting an interface. For example, "127.0.0.1,eth0"   </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.allow_multicast_interfaces </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o7">com.rti.ndds.transport.Transport.Property_t.allow_multicast_interfaces_list</a> and com.rti.ndds.transport.Transport.Property_t.allow_multicast_interfaces_list_length. <br>
 Interfaces should be specified as comma-separated strings, with each comma delimiting an interface. For example, "127.0.0.1,eth0"   </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.deny_multicast_interfaces </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o8">com.rti.ndds.transport.Transport.Property_t.deny_multicast_interfaces_list</a> and com.rti.ndds.transport.Transport.Property_t.deny_multicast_interfaces_list_length. Interfaces should be specified as comma-separated strings, with each comma delimiting an interface. For example, "127.0.0.1,eth0"   </td></tr>
<tr>
<td>dds.transport.shmem.builtin.received_message_count_max </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport_1_1Property__t.html#o0">com.rti.ndds.transport.ShmemTransport.Property_t.received_message_count_max</a>  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.receive_buffer_size </td><td>See <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport_1_1Property__t.html#o1">com.rti.ndds.transport.ShmemTransport.Property_t.receive_buffer_size</a>  <p>
<p>
</td></tr>
</table>
</center> 
<p>
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Data Distribution Service Java API Version 4.2e (General Access Release)</A>
Copyright &copy; 4 Dec 2007 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
