<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTI Data Distribution Service Java API: NDDS_DISCOVERY_PEERS</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>NDDS_DISCOVERY_PEERS<br>
<small>
[<a class="el" href="group__DDSDiscoveryQosModule.html">DISCOVERY</a>]</small>
</h1>Environment variable or a file that specifies the default values of <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DiscoveryQosPolicy.html#o3">com.rti.dds.infrastructure.DiscoveryQosPolicy.initial_peers</a> and <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DiscoveryQosPolicy.html#o1">com.rti.dds.infrastructure.DiscoveryQosPolicy.multicast_receive_addresses</a> contained in the <a class="el" href="classcom_1_1rti_1_1dds_1_1domain_1_1DomainParticipantQos.html#o5">com.rti.dds.domain.DomainParticipantQos.discovery</a> qos policy.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<dl compact><dt><b></b></dt><dd></dd></dl>
The default value of the <a class="el" href="classcom_1_1rti_1_1dds_1_1domain_1_1DomainParticipantQos.html">com.rti.dds.domain.DomainParticipantQos</a> is obtained by calling <a class="el" href="classcom_1_1rti_1_1dds_1_1domain_1_1DomainParticipantFactory.html#a2">com.rti.dds.domain.DomainParticipantFactory.get_default_participant_qos()</a>. <p>
NDDS_DISCOVERY_PEERS specifies the default value of the <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DiscoveryQosPolicy.html#o3">com.rti.dds.infrastructure.DiscoveryQosPolicy.initial_peers</a> and <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DiscoveryQosPolicy.html#o1">com.rti.dds.infrastructure.DiscoveryQosPolicy.multicast_receive_addresses</a> fields, when the default participant QoS policies have not been explictly set by the user (i.e., <a class="el" href="classcom_1_1rti_1_1dds_1_1domain_1_1DomainParticipantFactory.html#a3">com.rti.dds.domain.DomainParticipantFactory.set_default_participant_qos()</a> has never been called or was called using <a class="el" href="group__DDSDomainParticipantFactoryModule.html#ga0">com.rti.dds.domain.DomainParticipantFactory.PARTICIPANT_QOS_DEFAULT</a>). <p>
NDDS_DISCOVERY_PEERS provides a mechanism to dynamically switch the discovery configuration of an RTI Data Distribution Service application without recompilation. The application programmer is free to not use the default values; instead use values supplied by other means. <p>
The NDDS_DISCOVERY_PEERS can be specified either in an environment variable as comma (',') separated <code>"peer</code> descriptors" (see <a class="el" href="group__NDDS__DISCOVERY__PEERS.html#NDDS_DISCOVERY_PEERS_format">Peer Descriptor Format</a>) or in a file. These forms are described below. <h2><a class="anchor" name="NDDS_DISCOVERY_PEERS_format">
Peer Descriptor Format</a></h2>
A <b>peer</b> <b>descriptor</b> string specifies a range of participants at a given <code>locator</code>. Peer descriptor strings are used in the <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DiscoveryQosPolicy.html#o3">com.rti.dds.infrastructure.DiscoveryQosPolicy.initial_peers</a> field and the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html#a42">com.rti.dds.domain.DomainParticipant.add_peer()</a> operation. <p>
The anatomy of a <code>peer</code> descriptor is illustrated below using a special "StarFabric" transport example. <p>
<div align="center">
<img src="NDDSPeerDescriptor.png" alt="NDDSPeerDescriptor.png">
<p><strong>"String based addressing"</strong></p></div>
 A peer descriptor consists of: <p>
<ul>
<li>[optional] <b>Maximum</b> <b>Participant</b> <b>ID</b>. Specifies the maximum participant ID that is contacted by the RTI Data Distribution Service discovery mechanism at the given locator. If omitted, a default value of 4 is implied. </li>
</ul>
<ul>
<li><b>Locator</b>. See <a class="el" href="group__NDDS__DISCOVERY__PEERS.html#NDDS_DISCOVERY_PEERS_locator_format">Locator Format</a>. </li>
</ul>
These are separated by the '@' character. The separator may be omitted if a participant ID limit is not explictly specified. <p>
Note that the "participant ID limit" only applies to unicast locators, and is ignored for multicast locators (and therefore should be omitted for multicast peer descriptors). <h3><a class="anchor" name="NDDS_DISCOVERY_PEERS_locator_format">
Locator Format</a></h3>
A <b>locator</b> string specifies a transport and an address in string format. Locators are used to form peer descriptors. A locator is equivalent to a peer descriptor with the default maximum participant ID. <p>
A locator consists of: <p>
<ul>
<li>[optional] <b>Transport</b> <b>name</b> (<b>alias</b> or <b>class</b>). This identifies the set of transport plugins (<a class="el" href="group__NDDSTransportModule.html#NDDSTransportModule_aliases">Transport Aliases</a>) that may be used to parse the <code>address</code> portion of the locator. Note that a transport class name is an implicit alias that used to refer to all the transport plugin instances of that class. </li>
</ul>
<ul>
<li>[optional] <b>Address</b>. See <a class="el" href="group__NDDS__DISCOVERY__PEERS.html#NDDS_DISCOVERY_PEERS_address_format">Address Format</a>. </li>
</ul>
These are separated by the "//:" string. The separator is specified if and only if a transport name is specified. <p>
If a transport name is specified, the address may be omitted; in that case all the unicast addresses (across all transport plugin instances) associated with the transport class are implied. Thus, a locator string may specify several addresses. <p>
If an address is specified, the transport name and the separator string may be omitted; in that case all the available transport plugins (for the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1infrastructure_1_1Entity.html">com.rti.dds.infrastructure.Entity</a>) may be used to parse the address string. <h3><a class="anchor" name="NDDS_DISCOVERY_PEERS_address_format">
Address Format</a></h3>
An <b>address</b> string specifies a transport independent network address that qualifies an <b>transport</b> <b>dependent</b> address string. Addresses are used to form locators. Addresses are also used in <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DiscoveryQosPolicy.html#o1">com.rti.dds.infrastructure.DiscoveryQosPolicy.multicast_receive_addresses</a>, and <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1TransportMulticastSettings__t.html#o1">com.rti.dds.infrastructure.TransportMulticastSettings_t.receive_address</a> fields. An address is equivalent to a locator in which the transport name and separator are omitted. <p>
An address consists of: <p>
<ul>
<li>[optional] <b>Network</b> <b>Address</b>. An address in IPv4 or IPv6 string notation. If omitted, the network address of the transport is implied (<a class="el" href="group__NDDSTransportModule.html#NDDSTransportModule_net_address">Transport Network Address</a>). </li>
</ul>
<ul>
<li>[optional] <b>Transport</b> <b>Address</b>. A string that is passed to the transport for processing. The transport maps this string into <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o1">com.rti.ndds.transport.Transport.Property_t.address_bit_count</a> bits. If omitted the network address is used as the fully qualified address. </li>
</ul>
These are separated by the '#' character. If a separator is specified, it must be followed by a non-empty string which is passed to the transport plugin. <p>
The bits resulting from the transport address string are prepended with the network address. The least significant <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1Transport_1_1Property__t.html#o1">com.rti.ndds.transport.Transport.Property_t.address_bit_count</a> bits of the network address are ignored (<a class="el" href="group__NDDSTransportModule.html#NDDSTransportModule_net_address">Transport Network Address</a>). <p>
If the separator is omitted and the string is not a valid IPv4 or IPv6 address, it is treated as a transport address with an implicit network address (of the transport plugin). <h2><a class="anchor" name="NDDS_DISCOVERY_PEERS_env_format">
NDDS_DISCOVERY_PEERS Environment Variable Format</a></h2>
NDDS_DISCOVERY_PEERS can be specified via an environment variable of the same name, consisting of a sequence of peer descriptors separated by the comma (',') character. <p>
<b>Examples</b> <p>
Multicast (maximum participant ID is irrelevant) <ul>
<li>239.255.0.1 </li>
</ul>
Default maximum participant ID on localhost <ul>
<li>localhost </li>
</ul>
Default maximum participant ID on host 192.168.1.1 (IPv4) <ul>
<li>192.168.1.1 </li>
</ul>
Default maximum participant ID on host FAA0::0 (IPv6) <ul>
<li>FAA0::1 </li>
</ul>
Default maximum participant ID on host FAA0::0#localhost (could be a UDPv4 transport plugin registered at network address of FAA0::0) (IPv6) <ul>
<li>FAA0::0#localhost </li>
</ul>
<p>
Default maximum participant ID on host himalaya accessed using the "udpv4" transport plugin(s) (IPv4) <ul>
<li>udpv4://himalaya </li>
</ul>
Default maximum participant ID on localhost using the "udpv4" transport plugin(s) registered at network address FAA0::0 <ul>
<li>udpv4://FAA0::0#localhost </li>
</ul>
Default maximum participant ID on all unicast addresses accessed via the "udpv4" (UDPv4) transport plugin(s) <ul>
<li>udpv4:// </li>
</ul>
Default maximum participant ID on host 0/0/R (StarFabric) <ul>
<li>0/0/R </li>
<li>#0/0/R </li>
</ul>
Default maximum participant ID on host 0/0/R (StarFabric) using the "starfabric" (StarFabric) transport plugin(s) <ul>
<li>starfabric://0/0/R </li>
<li>starfabric://#0/0/R </li>
</ul>
Default maximum participant ID on host 0/0/R (StarFabric) using the "starfabric" (StarFabric) transport plugin(s) registered at network address FAA0::0 <ul>
<li>starfabric://FBB0::0#0/0/R </li>
</ul>
Default maximum participant ID on all unicast addresses accessed via the "starfabric" (StarFabric) transport plugin(s) <ul>
<li>starfabric:// </li>
</ul>
Default maximum participant ID on all unicast addresses accessed via the "shmem" (shared memory) transport plugin(s) <ul>
<li>shmem:// </li>
</ul>
Default maximum participant ID on all unicast addresses accessed via the "shmem" (shared memory) transport plugin(s) registered at network address FCC0::0 <ul>
<li>shmem://FCC0::0 </li>
</ul>
Default maximum participant ID on hosts himalaya and gangotri <ul>
<li>himalaya,gangotri </li>
</ul>
Maximum participant ID of 1 on hosts himalaya and gangotri <ul>
<li>1@himalaya,1@gangotri </li>
</ul>
Combinations of above <ul>
<li>239.255.0.1,localhost,192.168.1.1,0/0/R </li>
<li>FAA0::1,FAA0::0#localhost,FBB0::0#0/0/R </li>
<li>udpv4://himalaya,udpv4://FAA0::0#localhost,#0/0/R </li>
<li>starfabric://0/0/R,starfabric://FBB0::0#0/0/R,shmem:// </li>
<li>starfabric://,shmem://FCC0::0,1@himalaya,1@gangotri </li>
</ul>
<h2><a class="anchor" name="NDDS_DISCOVERY_PEERS_file_format">
NDDS_DISCOVERY_PEERS File Format</a></h2>
NDDS_DISCOVERY_PEERS can be specified via a file of the same name in the program's current working directory. A NDDS_DISCOVERY_PEERS file would contain a sequence of peer descriptors separated by whitespace or the comma (',') character. The file may also contain comments starting with a semicolon (';') character till the end of the line. <p>
<b>Example:</b> <p>
<div class="fragment"><pre class="fragment">  ;; NDDS_DISCOVERY_PEERS - Default Discovery Configuration File
  ;;
  ;;
  ;; NOTE:
  ;;   1. This file must be in the current working directory, i.e.
  ;;      in the folder from which the application is launched.
  ;;
  ;;   2. This file takes precedence over the environment variable NDDS_DISCOVERY_PEERS
  ;;
  
  ;; Multicast
  239.255.0.1                  ; The default RTI Data Distribution Service discovery multicast address
  
  ;; Unicast
  localhost,192.168.1.1        ; A comma can be used a separator
  
  FAA0::1  FAA0::0#localhost   ; Whitespace can be used as a separator
  
  1@himalaya                   ; Maximum participant ID of 1 on 'himalaya'
  1@gangotri
  
  
  ;; UDPv4
  udpv4://himalaya             ; 'himalaya' via 'udpv4' transport plugin(s)
  udpv4://FAA0::0#localhost    ; 'localhost' via 'updv4' transport
                               ;  plugin registered at network address FAA0::0
  
  ;; Shared Memory
  shmem://                     ; All 'shmem' transport plugin(s)
  builtin.shmem://             ; The builtin 'shmem' transport plugin
  shmem://FCC0::0              ; Shared memory transport plugin registered
                               ;                at network address FCC0::0
  
  ;; StarFabric
  0/0/R                        ; StarFabric node 0/0/R
  starfabric://0/0/R           ; 0/0/R accessed via 'starfabric'
                               ;             transport plugin(s)
  starfabric://FBB0::0#0/0/R   ; StarFabric transport plugin registered
                               ;             at network address FBB0::0
  starfabric://                ; All 'starfabric' transport plugin(s)
  </pre></div> <h2><a class="anchor" name="NDDS_DISCOVERY_PEERS_precedence">
NDDS_DISCOVERY_PEERS Precedence</a></h2>
If the current working directory from which the RTI Data Distribution Service application is launched contains a file called NDDS_DISCOVERY_PEERS, and an environment variable named NDDS_DISCOVERY_PEERS is also defined, the file takes precedence; the environment variable is ignored. <h2><a class="anchor" name="NDDS_DISCOVERY_PEERS_default">
NDDS_DISCOVERY_PEERS Default Value</a></h2>
If NDDS_DISCOVERY_PEERS is not specified (either as a file in the current working directory, or as an environment variable), it implicitly defaults to the following. <div class="fragment"><pre class="fragment">  ;; Multicast (only on platforms which allow UDPv4 multicast out of the box)
  ;;
  ;; This allows any RTI Data Distribution Service applications anywhere on the local network to
  ;; discover each other over UDPv4.
  
  builtin.udpv4://239.255.0.1                  ; RTI Data Distribution Service's default discovery multicast address
  
  
  ;; Unicast - UDPv4 (on all platforms)
  ;;
  ;; This allows two RTI Data Distribution Service applications using participant IDs up to the maximum
  ;; default participant ID on the local host and domain to discover each
  ;; other over UDP/IPv4.
  
  builtin.udpv4://127.0.0.1
  
  
  ;; Unicast - Shared Memory (only on platforms that support shared memory)
  ;;
  ;; This allows two RTI Data Distribution Service applications using participant IDs up to the maximum
  ;; default participant ID on the local host and domain to discover each
  ;; other over shared memory.
  
  builtin.shmem:// </pre></div> <h2><a class="anchor" name="NDDS_DISCOVERY_PEERS_builtin_transport_class_names">
Builtin Transport Class Names</a></h2>
The class names for the builtin transport plugins are: <ul>
<li><code>shmem</code> - <a class="el" href="interfacecom_1_1rti_1_1ndds_1_1transport_1_1ShmemTransport.html">com.rti.ndds.transport.ShmemTransport</a> </li>
<li><code>udpv4</code> - <a class="el" href="interfacecom_1_1rti_1_1ndds_1_1transport_1_1UDPv4Transport.html">com.rti.ndds.transport.UDPv4Transport</a> </li>
<li><code>udpv6</code> - <a class="el" href="classcom_1_1rti_1_1ndds_1_1transport_1_1UDPv6Transport.html">com.rti.ndds.transport.UDPv6Transport</a> </li>
</ul>
These may be used as the transport names in the <a class="el" href="group__NDDS__DISCOVERY__PEERS.html#NDDS_DISCOVERY_PEERS_locator_format">Locator Format</a>. <h2><a class="anchor" name="DDS_DISCOVERY_PEERS_localhost_communication">
NDDS_DISCOVERY_PEERS and Local Host Communication</a></h2>
Suppose you want to communicate with other RTI Data Distribution Service applications on the same host and you are setting NDDS_DISCOVERY_PEERS explicitly (generally in order to use unicast discovery with applications on other hosts) <p>
If the local host platform does not support the shared memory transport, then you can include the name of the local host in the NDDS_DISCOVERY_PEERS list. <p>
If the local host platform supports the shared memory transport, then you can do one of the following: <p>
<ul>
<li>Include "shmem://" in the NDDS_DISCOVERY_PEERS list. This will cause shared memory to be used for discovery and data traffic for applications on the same host. </li>
</ul>
or: <p>
<ul>
<li>Include the name of the local host in the NDDS_DISCOVERY_PEERS list, and disable the shared memory transport in the <a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1TransportBuiltinQosPolicy.html">com.rti.dds.infrastructure.TransportBuiltinQosPolicy</a> of the <a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html">com.rti.dds.domain.DomainParticipant</a>. This will cause UDP loopback to be used for discovery and data traffic for applications on the same host. </li>
</ul>
(To check if your platform supports shared memory, see the Platform Notes document.) <p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DiscoveryQosPolicy.html#o1">com.rti.dds.infrastructure.DiscoveryQosPolicy.multicast_receive_addresses</a> <p>
<a class="el" href="classcom_1_1rti_1_1dds_1_1infrastructure_1_1DiscoveryQosPolicy.html#o3">com.rti.dds.infrastructure.DiscoveryQosPolicy.initial_peers</a> <p>
<a class="el" href="interfacecom_1_1rti_1_1dds_1_1domain_1_1DomainParticipant.html#a42">com.rti.dds.domain.DomainParticipant.add_peer()</a> <p>
<a class="el" href="group__DDSDomainParticipantFactoryModule.html#ga0">com.rti.dds.domain.DomainParticipantFactory.PARTICIPANT_QOS_DEFAULT</a> <p>
<a class="el" href="classcom_1_1rti_1_1dds_1_1domain_1_1DomainParticipantFactory.html#a2">com.rti.dds.domain.DomainParticipantFactory.get_default_participant_qos()</a> <p>
<a class="el" href="group__NDDSTransportModule.html#NDDSTransportModule_aliases">Transport Aliases</a> <p>
<a class="el" href="group__NDDSTransportModule.html#NDDSTransportModule_net_address">Transport Network Address</a> </dd></dl>
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Data Distribution Service Java API Version 4.2e (General Access Release)</A>
Copyright &copy; 4 Dec 2007 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
